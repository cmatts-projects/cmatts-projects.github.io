(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6760:(t,e,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(7092)}])},7092:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>tM});var o=s(7876),i=s(4232);let r={reactStrictMode:!0,output:"export",distDir:"dist",basePath:"github"===s(5364).env.NEXT_PUBLIC_TARGET_ENV?"/cube-ai":void 0,images:{unoptimized:!0},env:{NEXT_PUBLIC_BUILD_DATE:"Build "+new Date().toISOString()}};var a=s(6768);class n{static getNodeWeights(){return n.nodeWeights}static setNodeWeights(t){n.nodeWeights={weights:t}}}var c=s(1777),l=s(3129),h=s(339);class u{static newFace(t){let e=[];if(t)for(let s=0;s<3;s++)e.push([t,t,t]);return{colours:e}}static cloneFace(t){let e=[];return t.colours.forEach(t=>e.push([...t])),u.faceWith(e)}static faceWith(t){let e=u.newFace();return e.colours=t,e}}let{newFace:d,faceWith:f,cloneFace:m}=u;class p{static newCube(t){if(t)return{faces:t};{let t=[];for(let e=1;e<=6;e++)t.push(d(e));return{faces:t}}}static cloneCube(t){let e=[];return t.faces.forEach(t=>{e.push(m(t))}),p.newCube(e)}static rotateX1(t){let e=t.faces[0].colours[2],s=p.getColumn(t.faces[2],0).reverse(),o=p.getColumn(t.faces[4],2).reverse(),i=t.faces[5].colours[0];t.faces[0].colours[2]=o,t.faces[1].colours=p.rotateClockwise(t.faces[1]).colours,p.setColumn(t.faces[2],0,e),p.setColumn(t.faces[4],2,i),t.faces[5].colours[0]=s}static reverseRotateX1(t){let e=t.faces[0].colours[2].reverse(),s=p.getColumn(t.faces[2],0),o=p.getColumn(t.faces[4],2),i=t.faces[5].colours[0].reverse();t.faces[0].colours[2]=s,t.faces[1].colours=p.rotateAntiClockwise(t.faces[1]).colours,p.setColumn(t.faces[2],0,i),p.setColumn(t.faces[4],2,e),t.faces[5].colours[0]=o}static rotateX3(t){let e=t.faces[0].colours[0].reverse(),s=p.getColumn(t.faces[2],2),o=p.getColumn(t.faces[4],0),i=t.faces[5].colours[2].reverse();t.faces[0].colours[0]=s,p.setColumn(t.faces[2],2,i),t.faces[3].colours=p.rotateClockwise(t.faces[3]).colours,p.setColumn(t.faces[4],0,e),t.faces[5].colours[2]=o}static reverseRotateX3(t){let e=t.faces[0].colours[0],s=p.getColumn(t.faces[2],2).reverse(),o=p.getColumn(t.faces[4],0).reverse(),i=t.faces[5].colours[2];t.faces[0].colours[0]=o,p.setColumn(t.faces[2],2,e),t.faces[3].colours=p.rotateAntiClockwise(t.faces[3]).colours,p.setColumn(t.faces[4],0,i),t.faces[5].colours[2]=s}static rotateY1(t){let e=p.getColumn(t.faces[0],0),s=p.getColumn(t.faces[1],0),o=p.getColumn(t.faces[3],2).reverse(),i=p.getColumn(t.faces[5],0).reverse();p.setColumn(t.faces[0],0,o),p.setColumn(t.faces[1],0,e),p.setColumn(t.faces[3],2,i),t.faces[4].colours=p.rotateClockwise(t.faces[4]).colours,p.setColumn(t.faces[5],0,s)}static reverseRotateY1(t){let e=p.getColumn(t.faces[0],0).reverse(),s=p.getColumn(t.faces[1],0),o=p.getColumn(t.faces[3],2).reverse(),i=p.getColumn(t.faces[5],0);p.setColumn(t.faces[0],0,s),p.setColumn(t.faces[1],0,i),p.setColumn(t.faces[3],2,e),t.faces[4].colours=p.rotateAntiClockwise(t.faces[4]).colours,p.setColumn(t.faces[5],0,o)}static rotateY3(t){let e=p.getColumn(t.faces[0],2).reverse(),s=p.getColumn(t.faces[1],2),o=p.getColumn(t.faces[3],0).reverse(),i=p.getColumn(t.faces[5],2);p.setColumn(t.faces[0],2,s),p.setColumn(t.faces[1],2,i),t.faces[2].colours=p.rotateClockwise(t.faces[2]).colours,p.setColumn(t.faces[3],0,e),p.setColumn(t.faces[5],2,o)}static reverseRotateY3(t){let e=p.getColumn(t.faces[0],2),s=p.getColumn(t.faces[1],2),o=p.getColumn(t.faces[3],0).reverse(),i=p.getColumn(t.faces[5],2).reverse();p.setColumn(t.faces[0],2,o),p.setColumn(t.faces[1],2,e),t.faces[2].colours=p.rotateAntiClockwise(t.faces[2]).colours,p.setColumn(t.faces[3],0,i),p.setColumn(t.faces[5],2,s)}static rotateZ1(t){let e=t.faces[1].colours[0],s=t.faces[2].colours[0],o=t.faces[3].colours[0],i=t.faces[4].colours[0];t.faces[0].colours=p.rotateClockwise(t.faces[0]).colours,t.faces[1].colours[0]=s,t.faces[2].colours[0]=o,t.faces[3].colours[0]=i,t.faces[4].colours[0]=e}static reverseRotateZ1(t){let e=t.faces[1].colours[0],s=t.faces[2].colours[0],o=t.faces[3].colours[0],i=t.faces[4].colours[0];t.faces[0].colours=p.rotateAntiClockwise(t.faces[0]).colours,t.faces[1].colours[0]=i,t.faces[2].colours[0]=e,t.faces[3].colours[0]=s,t.faces[4].colours[0]=o}static rotateZ3(t){let e=t.faces[1].colours[2],s=t.faces[2].colours[2],o=t.faces[3].colours[2],i=t.faces[4].colours[2];t.faces[1].colours[2]=i,t.faces[2].colours[2]=e,t.faces[3].colours[2]=s,t.faces[4].colours[2]=o,t.faces[5].colours=p.rotateClockwise(t.faces[5]).colours}static reverseRotateZ3(t){let e=t.faces[1].colours[2],s=t.faces[2].colours[2],o=t.faces[3].colours[2],i=t.faces[4].colours[2];t.faces[1].colours[2]=s,t.faces[2].colours[2]=o,t.faces[3].colours[2]=i,t.faces[4].colours[2]=e,t.faces[5].colours=p.rotateAntiClockwise(t.faces[5]).colours}static rotateAntiClockwise(t){let e=d();return e.colours=[p.getColumn(t,2),p.getColumn(t,1),p.getColumn(t,0)],e}static rotateClockwise(t){let e=d();return e.colours=[p.getColumn(t,0).reverse(),p.getColumn(t,1).reverse(),p.getColumn(t,2).reverse()],e}static getColumn(t,e){return[t.colours[0][e],t.colours[1][e],t.colours[2][e]]}static setColumn(t,e,s){for(let o=0;o<3;o++)t.colours[o][e]=s[o]}}let{newCube:x,cloneCube:g,rotateX1:C,rotateX3:N,rotateY1:A,rotateY3:v,rotateZ3:E,rotateZ1:_,reverseRotateX1:b,reverseRotateX3:M,reverseRotateY1:I,reverseRotateY3:w,reverseRotateZ1:R,reverseRotateZ3:L}=p,{PLANE_X1:j,PLANE_X3:P,PLANE_Y1:y,PLANE_Y3:W,PLANE_Z1:S,PLANE_Z3:D,REV_PLANE_X1:k,REV_PLANE_X3:T,REV_PLANE_Y1:O,REV_PLANE_Y3:X,REV_PLANE_Z1:V,REV_PLANE_Z3:Y}=function(t){return t[t.PLANE_X1=0]="PLANE_X1",t[t.PLANE_X3=1]="PLANE_X3",t[t.PLANE_Y1=2]="PLANE_Y1",t[t.PLANE_Y3=3]="PLANE_Y3",t[t.PLANE_Z1=4]="PLANE_Z1",t[t.PLANE_Z3=5]="PLANE_Z3",t[t.REV_PLANE_X1=6]="REV_PLANE_X1",t[t.REV_PLANE_X3=7]="REV_PLANE_X3",t[t.REV_PLANE_Y1=8]="REV_PLANE_Y1",t[t.REV_PLANE_Y3=9]="REV_PLANE_Y3",t[t.REV_PLANE_Z1=10]="REV_PLANE_Z1",t[t.REV_PLANE_Z3=11]="REV_PLANE_Z3",t}({});class B{randomChoice(t){let e=Math.sin(this.seed++)*this.throwAwayFactor;return Math.floor((e-=Math.floor(e))*t)}constructor(t){this.throwAwayFactor=1e4,this.seed=t||Math.floor(100*Math.random())+100}}class z{static createMuddledCube(t,e){let s=new B(e),o=x();for(let e=0;e<t;e++)z.applyReverseAction(o,s.randomChoice(z.MOVES_AVAILABLE));return o}static applyReverseAction(t,e){z.applyAction(t,e+6)}static applyAction(t,e){switch(e){case j:C(t);break;case P:N(t);break;case y:A(t);break;case W:v(t);break;case S:_(t);break;case D:E(t);break;case k:b(t);break;case T:M(t);break;case O:I(t);break;case X:w(t);break;case V:R(t);break;case Y:L(t)}}}z.MOVES_AVAILABLE=6;class Z{static tuples(t){return t.faces.flatMap(t=>t.colours.flat().map((t,e)=>{if(e==Z.CENTER_PIECE)return[];let s=[0,0,0,0,0,0];return s[t-1]=1,s}).flat())}}Z.CENTER_PIECE=4;class q{static evaluate(t,e){let s=[];t.faces.forEach(t=>{s.push([...new Set([...t.colours[0],...t.colours[1],...t.colours[2]])].length)});let o=6/s.reduce((t,e)=>t+e,0);return{faceColours:s,completed:o,lastMove:e}}}class F{static solve(t,e,s){let o=s||F.MAX_MOVES,i=q.evaluate(t,void 0),r=0,a=-1,n=0;for(;r<o&&1!=i.completed&&4!=n;r++)n=(i=F.move(t,e)).lastMove==a?n+1:0,a=i.lastMove;return{solutionMoves:r,cubeStatus:i}}static move(t,e){let s=Z.tuples(t),o=e.evaluate(s).triggeredNode;return z.applyAction(t,o),q.evaluate(t,o)}}F.MAX_MOVES=100;var G=s(3222);class H{setWeights(t){t.forEach(t=>this.hiddenWeightMatrix.push(new G.uq(t)))}initialiseWeights(t,e,s,o){let i=new G.uq(t+1,e);this.initialiseMatrix(i),this.hiddenWeightMatrix.push(i);for(let t=1;t<=s;t++){let i=t==s?o:e,r=new G.uq(e+1,i);this.initialiseMatrix(r),this.hiddenWeightMatrix.push(r)}}evaluate(t){let e=[];e.push(this.nodeOutput(this.toMatrixWithBias(t),this.hiddenWeightMatrix[0]));for(let t=1;t<=this.hiddenWeightMatrix.length-1;t++)e.push(this.nodeOutput(this.toMatrixWithBias(e[t-1]),this.hiddenWeightMatrix[t]));return{triggeredNode:e[e.length-1].indexOf(Math.max(...e[e.length-1])),output:e}}toMatrixWithBias(t){return new G.uq([[...t,1]])}nodeOutput(t,e){return t.mmul(e).getRow(0).map(t=>this.sigmoid(t))}sigmoid(t){return 1/(1+Math.exp(-t))}sigmoidDerivative(t){return t*(1-t)}applyFeedback(t,e){let s;let o=this.evaluate(t),i=[t,...o.output],r=this.hiddenWeightMatrix[this.hiddenWeightMatrix.length-1].columns,a=G.uq.zeros(1,r).set(0,e,1);for(let t=this.hiddenWeightMatrix.length-1;t>=0;t--){let e=o.output[t],r=i[t];s?(s=this.hiddenWeightMatrix[t+1].mmul(s.transpose()).transpose()).removeColumn(s.columns-1):s=G.uq.sub(a,new G.uq([e])),this.adjustWeighting(e,s,r,this.hiddenWeightMatrix[t])}}adjustWeighting(t,e,s,o){let i=new G.uq([t.map(t=>this.sigmoidDerivative(t))]),r=e.mul(i).mul(this.LEARN_RATE),a=this.toMatrixWithBias(s).transpose().mmul(r);o.add(a)}initialiseMatrix(t){let e=-1/Math.sqrt(t.rows),s=1/Math.sqrt(t.rows);for(let o=0;o<t.rows;o++)for(let i=0;i<t.columns;i++){let r=s+i*o/(t.columns*t.rows)*(e-s);t.set(o,i,r)}}exportNodeWeights(){return JSON.stringify(this.hiddenWeightMatrix)}constructor(t){this.LEARN_RATE=.1,this.hiddenWeightMatrix=[],t&&this.setWeights(t.weights)}}let K={nodeWeights:n.getNodeWeights(),cube:x(),running:!1,xRotation:315,yRotation:315,difficulty:8,moves:0,complete:!0,transition:0,sameMoveCount:0},U=(0,h.Z0)({name:"cube",initialState:K,reducers:{start(t){t.complete||(t.running=!0)},stop(t){t.running=!1},rotateX(t,e){t.xRotation=e.payload},rotateY(t,e){t.yRotation=e.payload},setDifficulty(t,e){t.difficulty=e.payload},move(t){if(t.running){let e=new H(t.nodeWeights),s=F.move(t.cube,e);t.moves=t.moves+1,t.complete=1==s.completed,t.sameMoveCount=s.lastMove==t.lastMove?t.sameMoveCount+1:0,t.lastMove=s.lastMove,t.running=!t.complete&&t.sameMoveCount<4,t.transition=80}},transitionStep(t){t.transition>0&&(t.transition=t.transition-10)},reset(t){t.nodeWeights=n.getNodeWeights(),t.cube=z.createMuddledCube(t.difficulty),t.running=!1,t.moves=0,t.complete=!1,t.transition=0,t.lastMove=void 0,t.sameMoveCount=0}}}),{stop:J,start:Q,rotateX:$,rotateY:tt,setDifficulty:te,move:ts,reset:to,transitionStep:ti}=U.actions,tr=U.reducer,ta=(0,l.HY)({cube:tr}),tn=t=>(0,h.U1)({reducer:ta,preloadedState:t});var tc=s(4587),tl=s.n(tc),th=s(4240),tu=s(9589),td=s(2325),tf=s(6970),tm=s(7784),tp=s(564);class tx extends i.Component{fireEvent(){this.props.running&&this.props.move(),this.startTimer()}componentDidMount(){this.startTimer()}componentWillUnmount(){this.stopTimer()}startTimer(){let t=(this.MAX_SPEED-this.state.speed+1)*150;this.intervalId=setTimeout(()=>this.fireEvent(),t)}stopTimer(){this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=void 0)}setTimer(t){let e=parseInt(t.target.value);this.setState({speed:e}),this.stopTimer(),this.startTimer()}render(){return(0,o.jsxs)(tu.A,{fluid:!0,"data-testid":"controlPanel",children:[(0,o.jsx)(tf.A,{className:"vcenter",children:(0,o.jsx)(tm.A,{lg:{span:11,offset:1},className:"h2 text-center",children:"Control Panel"})}),(0,o.jsxs)(tf.A,{className:"vcenter",children:[(0,o.jsx)(tm.A,{lg:{span:1,offset:1},className:"h2 text-center",children:(0,o.jsx)("i",{className:"bi bi-arrow-down-up fs-4"})}),(0,o.jsx)(tm.A,{lg:9,className:"h2 text-center",children:(0,o.jsx)(tp.A.Range,{"aria-label":"xRotation",min:this.MIN_ANGLE,max:this.MAX_ANGLE,value:this.props.xRotation,step:10,onChange:t=>this.props.rotateX(t.target.valueAsNumber)})})]}),(0,o.jsxs)(tf.A,{className:"vcenter",children:[(0,o.jsx)(tm.A,{lg:{span:1,offset:1},className:"h2 text-center",children:(0,o.jsx)("i",{className:"bi bi-arrow-left-right fs-4"})}),(0,o.jsx)(tm.A,{lg:9,className:"h2 text-center",children:(0,o.jsx)(tp.A.Range,{"aria-label":"yRotation",min:this.MIN_ANGLE,max:this.MAX_ANGLE,value:this.props.yRotation,step:10,onChange:t=>this.props.rotateY(t.target.valueAsNumber)})})]}),(0,o.jsxs)(tf.A,{className:"vcenter",children:[(0,o.jsx)(tm.A,{lg:{span:1,offset:1},className:"h2 text-center",children:(0,o.jsx)("i",{className:"bi bi-shuffle fs-4"})}),(0,o.jsx)(tm.A,{lg:9,className:"h2 text-center",children:(0,o.jsx)(tp.A.Range,{"aria-label":"difficulty",min:this.MIN_DIFFICULTY,max:this.MAX_DIFFICULTY,value:this.props.difficulty,step:1,onChange:t=>this.props.setDifficulty(t.target.valueAsNumber)})})]}),(0,o.jsxs)(tf.A,{className:"vcenter",children:[(0,o.jsx)(tm.A,{lg:{span:1,offset:1},className:"h2 text-center",children:(0,o.jsx)("i",{className:"bi bi-speedometer2 fs-4"})}),(0,o.jsx)(tm.A,{lg:9,className:"h2 text-center",children:(0,o.jsx)(tp.A.Range,{"aria-label":"speed",min:this.MIN_SPEED,max:this.MAX_SPEED,value:this.state.speed,onChange:this.setTimer.bind(this)})})]}),(0,o.jsxs)(tf.A,{className:"vcenter",children:[(0,o.jsx)(tm.A,{lg:{span:5,offset:1},className:"h2 text-center",children:(0,o.jsx)("button",{"aria-label":"muddle",type:"button",className:"btn btn-outline-danger",onClick:()=>this.props.reset(),children:(0,o.jsx)("b",{children:"Muddle"})},"eject")}),this.props.running&&(0,o.jsx)(tm.A,{lg:6,className:"h2 text-center",children:(0,o.jsx)("button",{"aria-label":"stop",type:"button",className:"btn btn-outline-success",onClick:()=>this.props.stop(),children:(0,o.jsx)("b",{children:"Stop"})})}),!this.props.running&&(0,o.jsx)(tm.A,{lg:6,className:"h2 text-center",children:(0,o.jsx)("button",{"aria-label":"solve",type:"button",className:"btn btn-outline-success",onClick:()=>this.props.start(),children:(0,o.jsx)("b",{children:"Solve"})})})]})]})}constructor(t){super(t),this.MIN_SPEED=1,this.MAX_SPEED=10,this.MIN_ANGLE=0,this.MAX_ANGLE=360,this.MIN_DIFFICULTY=1,this.MAX_DIFFICULTY=20,this.intervalId=void 0,this.state={speed:this.MIN_SPEED}}}let tg=(0,c.Ng)(t=>({running:t.cube.running,xRotation:t.cube.xRotation,yRotation:t.cube.yRotation,difficulty:t.cube.difficulty}),{start:Q,stop:J,rotateX:$,rotateY:tt,setDifficulty:te,move:ts,reset:to})(tx);class tC{getFaceColours(t){return[this.col1(t),this.col2(t),this.col3(t),this.col4(t),this.col5(t),this.col6(t)]}colour(t,e){if(t.indexOf(this.blockNumber)>=0){let s=Math.floor(t.indexOf(this.blockNumber)/3),o=t.indexOf(this.blockNumber)%3;return e.colours[s][o]}return 0}col1(t){return this.colour(this.PLANE_BLOCK_IDS[S],t.faces[0])}col2(t){return this.colour(this.PLANE_BLOCK_IDS[j],t.faces[1])}col3(t){return this.colour(this.PLANE_BLOCK_IDS[W],t.faces[2])}col4(t){return this.colour(this.PLANE_BLOCK_IDS[P],t.faces[3])}col5(t){return this.colour(this.PLANE_BLOCK_IDS[y],t.faces[4])}col6(t){return this.colour(this.PLANE_BLOCK_IDS[D],t.faces[5])}getVectors(){let t=new G.uq([[this.x,this.y,this.z],[this.x,this.y,this.z+1],[this.x+1,this.y,this.z+1],[this.x+1,this.y,this.z]]),e=new G.uq([[this.x,this.y,this.z+1],[this.x,this.y+1,this.z+1],[this.x+1,this.y+1,this.z+1],[this.x+1,this.y,this.z+1]]),s=new G.uq([[this.x+1,this.y,this.z+1],[this.x+1,this.y+1,this.z+1],[this.x+1,this.y+1,this.z],[this.x+1,this.y,this.z]]),o=new G.uq([[this.x,this.y,this.z],[this.x,this.y+1,this.z],[this.x+1,this.y+1,this.z],[this.x+1,this.y,this.z]]);return[t,e,s,o,new G.uq([[this.x,this.y,this.z+1],[this.x,this.y+1,this.z+1],[this.x,this.y+1,this.z],[this.x,this.y,this.z]]),new G.uq([[this.x,this.y+1,this.z],[this.x,this.y+1,this.z+1],[this.x+1,this.y+1,this.z+1],[this.x+1,this.y+1,this.z]])]}getView(){return this.getVectors().map((t,e)=>{let s=this.transformXRotation(this.planeRotateX,t);s=this.transformYRotation(this.planeRotateY,s),s=this.transformZRotation(this.planeRotateZ,s),s=this.transformXRotation(this.rotateX,s),s=this.transformYRotation(this.rotateY,s),(s=this.transformZRotation(this.rotateZ,s)).multiply(this.BLOCK_SIZE);let o=this.distance(s);this.applyPerspective(s),s.round();let i=s.get(0,0),r=s.get(0,1),a=s.get(1,0),n=s.get(1,1),c=s.get(2,0),l=s.get(2,1);return{x1:i,y1:r,x2:a,y2:n,x3:c,y3:l,x4:s.get(3,0),y4:s.get(3,1),dist:o,colour:this.faceColour[e]}})}transformXRotation(t,e){return new G.uq([[1,0,0],[0,Math.cos(t),-Math.sin(t)],[0,Math.sin(t),Math.cos(t)]]).mmul(e.transpose()).transpose()}transformYRotation(t,e){return new G.uq([[Math.cos(t),0,Math.sin(t)],[0,1,0],[-Math.sin(t),0,Math.cos(t)]]).mmul(e.transpose()).transpose()}transformZRotation(t,e){return new G.uq([[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]).mmul(e.transpose()).transpose()}distance(t){let e=t.getColumn(2),s=this.VIEW_DISTANCE-e[0],o=this.VIEW_DISTANCE-e[1],i=this.VIEW_DISTANCE-e[2],r=this.VIEW_DISTANCE-e[3];return Math.floor(Math.sqrt(s*s+o*o+i*i+r*r))}withRotateX(t){return this.rotateX=t*Math.PI/180,this}withRotateY(t){return this.rotateY=t*Math.PI/180,this}withRotateZ(t){return this.rotateZ=t*Math.PI/180,this}rotatePlaneX(t){return this.planeRotateX=t*Math.PI/180,this}rotatePlaneY(t){return this.planeRotateY=t*Math.PI/180,this}rotatePlaneZ(t){return this.planeRotateZ=t*Math.PI/180,this}withRotation(t,e){switch(t){case j:this.PLANE_BLOCK_IDS[j].indexOf(this.blockNumber)>=0&&this.rotatePlaneZ(-e);break;case P:this.PLANE_BLOCK_IDS[P].indexOf(this.blockNumber)>=0&&this.rotatePlaneZ(e);break;case y:this.PLANE_BLOCK_IDS[y].indexOf(this.blockNumber)>=0&&this.rotatePlaneX(e);break;case W:this.PLANE_BLOCK_IDS[W].indexOf(this.blockNumber)>=0&&this.rotatePlaneX(-e);break;case S:this.PLANE_BLOCK_IDS[S].indexOf(this.blockNumber)>=0&&this.rotatePlaneY(e);break;case D:this.PLANE_BLOCK_IDS[D].indexOf(this.blockNumber)>=0&&this.rotatePlaneY(-e)}return this}applyPerspective(t){for(let e=0;e<t.rows;e++){let s=this.PERSPECTIVE_DISTANCE-t.getColumnVector(2).get(e,0);t.set(e,0,this.PERSPECTIVE_DISTANCE*t.get(e,0)/s),t.set(e,1,this.PERSPECTIVE_DISTANCE*t.get(e,1)/s)}}constructor(t,e){this.BLOCK_SIZE=48,this.VIEW_DISTANCE=256,this.PERSPECTIVE_DISTANCE=360,this.PLANE_BLOCK_IDS=[[1,2,3,4,5,6,7,8,9],[21,20,19,24,23,22,27,26,25],[19,10,1,22,13,4,25,16,7],[3,12,21,6,15,24,9,18,27],[19,20,21,10,11,12,1,2,3],[7,8,9,16,17,18,25,26,27]],this.blockNumber=t,this.x=(t-1)%3-1.5,this.y=Math.floor((t-1)%9/3)-1.5,this.z=.5-Math.floor((t-1)/9),this.faceColour=this.getFaceColours(e),this.rotateX=0,this.rotateY=0,this.rotateZ=0,this.planeRotateX=0,this.planeRotateY=0,this.planeRotateZ=0}}class tN extends i.Component{fireEvent(){this.props.transition>0&&this.props.transitionStep(),this.startTimer()}componentDidMount(){this.startTimer()}componentWillUnmount(){this.stopTimer()}startTimer(){this.intervalId=setTimeout(()=>this.fireEvent(),50)}stopTimer(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)}renderBackground(){return[(0,o.jsx)("rect",{"data-testid":"background",x:-(this.WINDOW_WIDTH/2),y:-(this.WINDOW_HEIGHT/2),width:"100%",height:"100%",fill:"#000040"},"background")]}renderCube(){return this.tiles().map((t,e)=>(0,o.jsx)("polygon",{points:"".concat(t.x1,",").concat(t.y1," ").concat(t.x2,",").concat(t.y2," ").concat(t.x3,",").concat(t.y3," ").concat(t.x4,",").concat(t.y4),fill:"".concat(this.COLOURS[t.colour]),stroke:"".concat(this.COLOURS[0]),strokeWidth:3},"tile-".concat(e)))}renderMoves(){return(0,o.jsxs)("text",{"data-testid":"moves",x:-(this.WINDOW_WIDTH/2),y:-(this.WINDOW_HEIGHT/2),dominantBaseline:"hanging",fill:"white",fontWeight:"bold",fontSize:"20px",fontFamily:"Monospace",children:["MOVES: ",this.props.moves]},"moves")}renderState(){let t=this.props.complete?"COMPLETE":this.props.sameMoveCount>3?"FAILED":"";return(0,o.jsx)("text",{"data-testid":"state",x:-15*t.length,y:-25,dominantBaseline:"hanging",fill:"white",fontWeight:"bold",fontSize:"50px",fontFamily:"Monospace",stroke:"black",strokeWidth:2,transform:"rotate(-15)",children:t},"state")}tiles(){let t=[];for(let e=1;e<=27;e++)t.push(...new tC(e,this.props.cube).withRotateX(this.props.xRotation).withRotateY(this.props.yRotation).withRotation(this.props.lastMove,this.props.transition).getView());return t.sort((t,e)=>e.dist-t.dist)}rotate(t){if(this.state.rotate){let e=(this.MAX_ANGLE+this.props.xRotation-t.movementY)%this.MAX_ANGLE,s=(this.MAX_ANGLE+this.props.yRotation+t.movementX)%this.MAX_ANGLE;this.props.rotateX(e),this.props.rotateY(s)}}startRotate(){this.setState({rotate:!0})}stopRotate(){this.setState({rotate:!1})}renderView(){let t=[...this.renderBackground(),...this.renderCube(),this.renderMoves(),this.renderState()],e="".concat(-(this.WINDOW_WIDTH/2)," ").concat(-(this.WINDOW_HEIGHT/2)," \n            ").concat(this.WINDOW_WIDTH," ").concat(this.WINDOW_HEIGHT);return(0,o.jsx)(tm.A,{"data-testid":"cubeDiv",lg:{span:10,offset:1},onMouseDown:this.startRotate.bind(this),onMouseUp:this.stopRotate.bind(this),onMouseLeave:this.stopRotate.bind(this),onMouseMove:this.rotate.bind(this),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:e,children:[t,"Sorry, your browser does not support inline SVG."]},"3dCube")})}render(){return(0,o.jsx)(tu.A,{fluid:!0,"data-testid":"3dView",children:(0,o.jsx)(tf.A,{className:"vcenter mx-3",children:this.renderView()})})}constructor(t){super(t),this.WINDOW_HEIGHT=300,this.WINDOW_WIDTH=300,this.MAX_ANGLE=360,this.COLOURS=["black","yellow","blue","red","lime","orange","white"],this.intervalId=void 0,this.state={rotate:!1}}}let tA=(0,c.Ng)(t=>({cube:t.cube.cube,xRotation:t.cube.xRotation,yRotation:t.cube.yRotation,moves:t.cube.moves,lastMove:t.cube.lastMove,transition:t.cube.transition,complete:t.cube.complete,sameMoveCount:t.cube.sameMoveCount}),{transitionStep:ti,rotateX:$,rotateY:tt})(tN);class tv extends i.Component{render(){return(0,o.jsxs)("div",{className:"user-select-none",children:[(0,o.jsx)(th.A,{className:"heading",children:(0,o.jsx)(tu.A,{fluid:!0,children:(0,o.jsxs)(td.A,{children:[(0,o.jsx)(tl(),{src:"./logo.svg",className:"logo",alt:"",width:100,height:100}),(0,o.jsx)("span",{className:"h1",children:"Cube AI"})]})})}),(0,o.jsx)("div",{className:"content",children:(0,o.jsxs)(tu.A,{fluid:!0,className:"margin",children:[(0,o.jsx)(tf.A,{className:"vcenter",children:(0,o.jsx)(tm.A,{lg:12,className:"h1 text-center",children:(0,o.jsx)("p",{children:"AI Cube Solver"})})}),(0,o.jsxs)(tf.A,{className:"vcenter",children:[(0,o.jsx)(tm.A,{lg:6,className:"text-center",children:(0,o.jsx)(tu.A,{fluid:!0,children:(0,o.jsx)(tf.A,{className:"vcenter",children:(0,o.jsx)(tm.A,{lg:12,children:(0,o.jsx)(tA,{})})})})}),(0,o.jsx)(tm.A,{lg:6,className:"text-center align-self-center",children:(0,o.jsx)(tu.A,{fluid:!0,children:(0,o.jsx)(tf.A,{className:"vcenter",children:(0,o.jsx)(tm.A,{lg:12,children:(0,o.jsx)(tg,{})})})})})]})]})}),(0,o.jsx)("footer",{className:"text-center footing",children:(0,o.jsx)("strong",{children:(0,o.jsxs)("a",{href:"https://cmatts.co.uk",target:"_blank",rel:"noopener noreferrer",title:"Build 2025-09-14T19:53:29.865Z",children:["\xa9 ",new Date().getFullYear()," Calvin Matthews"]})})})]})}}class tE extends i.Component{componentDidCatch(t,e){this.setState({error:t,info:e})}render(){return this.state.error?(0,o.jsx)(tu.A,{fluid:!0,children:(0,o.jsx)(tf.A,{className:"vcenter",children:(0,o.jsx)(tm.A,{lg:12,className:"h1 text-center",children:"Oops! Something went wrong!"})})}):this.props.children}constructor(t){super(t),this.state={error:void 0,info:void 0}}}class t_ extends i.Component{render(){return(0,o.jsx)(c.Kq,{store:tn(),children:(0,o.jsx)(tE,{children:(0,o.jsx)(tv,{})})})}}let tb=t=>fetch((r.basePath?r.basePath:"")+t).then(t=>t.json());function tM(){let{data:t,error:e,isLoading:s}=(0,a.Ay)("/NeuralNetworkState.json",tb);return e?(0,o.jsx)("div",{children:"failed to load"}):s?(0,o.jsx)("div",{children:"loading..."}):(n.setNodeWeights(t),(0,o.jsx)(t_,{}))}}},t=>{var e=e=>t(t.s=e);t.O(0,[46,636,593,792],()=>e(6760)),_N_E=t.O()}]);